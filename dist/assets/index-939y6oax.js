import{r as c,l as f,u as h,R as e,E as l,F as b,ab as T,p as A,y as m,z as w,a8 as B,B as k,a7 as S}from"./@vue-4VtEq8s7.js";import{D}from"./vue3-promise-dialog-pueFlEgn.js";import{s as U,g as R,v as z,w as V}from"./index-sjGwbL7V.js";import{c as M}from"./attachFile-nZvzdqoi.js";import{e as d,i as u,k as $,r as j,v as G,w as y,x as g,F as L,G as W,y as H,H as J,I as O,a as x,h as E,J as P,p as Y}from"./vuetify-N6sFEKsC.js";/* empty css             */import"./vue-router-izlzWlJ4.js";import"./axios-L6U4YIEh.js";import"./pinia-2JqXyxpT.js";import"./pinia-plugin-persistedstate-XbYvz584.js";import"./vue-detect-browser-HAC5R545.js";import"./vue-json-excel3-q7weqA0g.js";import"./vue-country-flag-next-USwdQ1vq.js";function q(i){return U({url:"/ai-suggest",method:"post",data:i})}function K(i){return R({url:"/file/upload",method:"post",data:i})}function Q(i){return console.log("sendMailApi=",i),U({url:"/ai-mail",method:"post",data:i})}const X=S("p",null," 담당자 검토를 거쳐 최종적으로 등록되며, 등록 후 입력하신 이메일이나, 연락처로 안내 드립니다. ",-1),Z={__name:"SuggestView",setup(i){const o=c({title:"",contents:"",suggestName:"",suggestEmail:"",suggestTel:"",categoryId:null});function _(){o.value.title="",o.value.contents="",o.value.suggestName="",o.value.suggestEmail="",o.value.suggestTel="",o.value.categoryId=null}const F=c({email:"hl2kxm@gmail.com",subject:"email test5",contents:"test email5"}),r=c({flag:!1,message:"등록이 완료되었습니다.",timeout:1500}),p=c([]);async function N(s){try{const t=new FormData;p.value.forEach(a=>{t.append("file",a)}),await K(t).then(async a=>{console.log("fileUpload response=",a.data.file);try{const n={suggestId:s,filename:a.data.file.filename,originalname:a.data.file.originalname,mimetype:a.data.file.mimetype};await M(n).then(v=>{console.log("attach response=",v.data)}).catch(v=>{V(" 파일등록 실패.")&&console.log("Err addNotice() - createAttachFileApi"),console.log(">createAttachFileApi() fail. error=",v)})}catch(n){console.error(n)}}).catch(a=>{V(" 파일등록 실패.")&&console.log("Err addNotice() - fileUploadApi"),console.log(">fileUploadApi() fail. error=",a)})}catch(t){console.error(t)}}async function C(){console.log(">>addSuggest()"),await Q(F.value),await z()?(console.log("YES"),await I(),_()):console.log("NO")}async function I(){await q(o.value).then(async s=>{if(s.data.status==="success"){console.log("createSuggest response.data=",s.data);const t=s.data.item.id;N(t),r.value.flag=!0}else console.log("::fail data.code=",s.data.code)}).catch(s=>{V(" 등록 실패.")&&console.log("Err addSuggest() - createSuggestApi"),console.log(">createSuggestApi() fail. error=",s)})}return(s,t)=>(f(),h(b,null,[e(E,null,{default:l(()=>[e(d,{justify:"center"},{default:l(()=>[e(u,{cols:"8",class:"ma-6"},{default:l(()=>[e($,{class:"mx-6 pa-4"},{default:l(()=>[e(j,null,{default:l(()=>[X,e(G,{modelValue:o.value.categoryId,"onUpdate:modelValue":t[0]||(t[0]=a=>o.value.categoryId=a),inline:"",density:"compact",color:"primary"},{default:l(()=>[e(y,{label:"시스템장애",value:"1"}),e(y,{label:"자료등록 신청",value:"2"}),e(y,{label:"기타",value:"3"})]),_:1},8,["modelValue"]),e(d,{dense:""},{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(g,{modelValue:o.value.suggestName,"onUpdate:modelValue":t[1]||(t[1]=a=>o.value.suggestName=a),label:"신청자",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{dense:""},{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(g,{modelValue:o.value.suggestEmail,"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.suggestEmail=a),label:"e-mail",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(u,{cols:"6"},{default:l(()=>[e(g,{modelValue:o.value.suggestTel,"onUpdate:modelValue":t[3]||(t[3]=a=>o.value.suggestTel=a),label:"연락처",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(g,{modelValue:o.value.title,"onUpdate:modelValue":t[4]||(t[4]=a=>o.value.title=a),label:"제목",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{dense:""},{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(L,{modelValue:o.value.contents,"onUpdate:modelValue":t[5]||(t[5]=a=>o.value.contents=a),label:"내용",placeholder:"Write something …",variant:"outlined",clearable:"","clear-icon":"mdi-close-circle","auto-grow":"",rows:"12","row-height":"25"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{dense:""},{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(W,{modelValue:p.value,"onUpdate:modelValue":t[6]||(t[6]=a=>p.value=a),label:"첨부파일",accept:"image/*",chips:"","show-size":"",variant:"outlined",density:"compact"},{selection:l(({fileNames:a})=>[(f(!0),h(b,null,T(a,n=>(f(),A(H,{key:n,size:"small",label:"",color:"primary",class:"me-2"},{default:l(()=>[m(w(n),1)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(J,null,{default:l(()=>[e(O),e(x,{class:"ma-2",color:"blue-darken-1",variant:"outlined"},{default:l(()=>[m(" 닫기 ")]),_:1}),e(x,{class:"ma-2",color:"blue-darken-1",variant:"flat",onClick:B(C,["stop"])},{default:l(()=>[m(" 저장 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(P,{modelValue:r.value.flag,"onUpdate:modelValue":t[7]||(t[7]=a=>r.value.flag=a),timeout:r.value.timeout},{default:l(()=>[m(w(r.value.message),1)]),_:1},8,["modelValue","timeout"]),e(k(D))],64))}},ee=S("div",{class:"text-center text-h2 font-weight-black text-black mx-16 my-5"},"문의/제안 등록",-1),fe={__name:"index",setup(i){return(o,_)=>(f(),A(E,{fluid:"",class:"bg-white"},{default:l(()=>[ee,e(Y,{class:"my-4 border-opacity-100",thickness:3}),e(k(Z))]),_:1}))}};export{fe as default};
