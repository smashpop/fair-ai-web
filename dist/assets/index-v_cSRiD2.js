import{r as v,l as m,a1 as V,a2 as l,I as e,p as x,F as k,a9 as U,u as f,v as A,a4 as C,a3 as y,y as F}from"./@vue-5qbJIjPN.js";import{s as I,i as S}from"./index-u9-2_j-W.js";import{c as T}from"./attachFile-Cpw5pdzo.js";import{e as d,i,k as B,y as E,s as N,t as g,m as c,z,A as D,B as R,C as $,u as L,a as _,h,p as j}from"./vuetify-jTIWUCT6.js";/* empty css             */import"./vue-router-kO06wcas.js";import"./axios-L6U4YIEh.js";import"./pinia-vSUcXG4D.js";import"./pinia-plugin-persistedstate-XbYvz584.js";import"./vue-detect-browser-HAC5R545.js";import"./vue-json-excel3-9SxCCbqx.js";function G(n){return I({url:"/ai-suggest",method:"post",data:n})}function M(n){return S({url:"/file/upload",method:"post",data:n})}const W=y("p",null," 담당자 검토를 거쳐 최종적으로 등록되며, 등록 후 입력하신 이메일이나, 연락처로 안내 드립니다. ",-1),q={__name:"SuggestView",setup(n){const o=v({title:"",contents:"",suggestName:"",suggestEmail:"",suggestTel:"",categoryId:null}),r=v([]);async function b(s){try{const t=new FormData;r.value.forEach(a=>{t.append("file",a)}),await M(t).then(async a=>{console.log("fileUpload response=",a.data.file);try{const u={suggestId:s,filename:a.data.file.filename,originalname:a.data.file.originalname,mimetype:a.data.file.mimetype};await T(u).then(p=>{console.log("attach response=",p.data)}).catch(p=>{console.log(">createAttachFileApi() fail. error=",p)})}catch(u){console.error(u)}}).catch(a=>{console.log(">fileUploadApi() fail. error=",a)})}catch(t){console.error(t)}}async function w(){await G(o.value).then(async s=>{if(s.data.status==="success"){console.log("createSuggest response.data=",s.data);const t=s.data.item.id;b(t)}else console.log("::fail data.code=",s.data.code)}).catch(s=>{console.log(">createSuggestApi() fail. error=",s)})}return(s,t)=>(m(),V(h,null,{default:l(()=>[e(d,{justify:"center"},{default:l(()=>[e(i,{cols:"8",class:"ma-6"},{default:l(()=>[e(B,{class:"mx-6 pa-4"},{default:l(()=>[e(E,null,{default:l(()=>[W,e(N,{modelValue:o.value.categoryId,"onUpdate:modelValue":t[0]||(t[0]=a=>o.value.categoryId=a),inline:"",density:"compact",color:"primary"},{default:l(()=>[e(g,{label:"시스템장애",value:"시스템장애"}),e(g,{label:"자료등록 신청",value:"자료등록 신청"}),e(g,{label:"기타",value:"기타"})]),_:1},8,["modelValue"]),e(d,{dense:""},{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(c,{modelValue:o.value.suggestName,"onUpdate:modelValue":t[1]||(t[1]=a=>o.value.suggestName=a),label:"신청자",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{dense:""},{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(c,{modelValue:o.value.suggestEmail,"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.suggestEmail=a),label:"e-mail",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(c,{modelValue:o.value.suggestTel,"onUpdate:modelValue":t[3]||(t[3]=a=>o.value.suggestTel=a),label:"연락처",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(c,{modelValue:o.value.title,"onUpdate:modelValue":t[4]||(t[4]=a=>o.value.title=a),label:"제목",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{dense:""},{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(z,{modelValue:o.value.contents,"onUpdate:modelValue":t[5]||(t[5]=a=>o.value.contents=a),label:"내용",placeholder:"Write something …",variant:"outlined",clearable:"","clear-icon":"mdi-close-circle","auto-grow":"",rows:"18","row-height":"25"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{dense:""},{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(D,{modelValue:r.value,"onUpdate:modelValue":t[6]||(t[6]=a=>r.value=a),label:"첨부파일",accept:"image/*",chips:"","show-size":"",variant:"outlined",density:"compact"},{selection:l(({fileNames:a})=>[(m(!0),x(k,null,U(a,u=>(m(),V(R,{key:u,size:"small",label:"",color:"primary",class:"me-2"},{default:l(()=>[f(A(u),1)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e($,null,{default:l(()=>[e(L),e(_,{class:"ma-2",color:"blue-darken-1",variant:"outlined"},{default:l(()=>[f(" 닫기 ")]),_:1}),e(_,{class:"ma-2",color:"blue-darken-1",variant:"flat",onClick:C(w,["stop"])},{default:l(()=>[f(" 저장 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},H=y("div",{class:"text-center text-h2 font-weight-black text-black mx-16 my-5"},"문의/제안 등록",-1),te={__name:"index",setup(n){return(o,r)=>(m(),V(h,{fluid:"",class:"bg-white"},{default:l(()=>[H,e(j,{class:"my-4 border-opacity-100",thickness:3}),e(F(q))]),_:1}))}};export{te as default};
