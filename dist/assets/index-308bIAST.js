import{r as f,l as c,a1 as _,a2 as l,I as e,p as U,F as E,a9 as S,u as p,v as C,a4 as F,a3 as b,y as I}from"./@vue-5qbJIjPN.js";import{s as N,i as T,w as v}from"./index-8CQYiO2Z.js";import{c as B}from"./attachFile-p_gITBYI.js";import{e as n,i,k as D,r as R,v as $,w as V,m as r,B as z,C as L,D as j,E as G,y as M,a as h,h as w,p as W}from"./vuetify-xWM4wXMg.js";/* empty css             */import"./vue-router-kO06wcas.js";import"./axios-L6U4YIEh.js";import"./vue3-promise-dialog-JNjw9D9N.js";import"./pinia-vSUcXG4D.js";import"./pinia-plugin-persistedstate-XbYvz584.js";import"./vue-detect-browser-HAC5R545.js";import"./vue-json-excel3-9SxCCbqx.js";function q(d){return N({url:"/ai-suggest",method:"post",data:d})}function H(d){return T({url:"/file/upload",method:"post",data:d})}const J=b("p",null," 담당자 검토를 거쳐 최종적으로 등록되며, 등록 후 입력하신 이메일이나, 연락처로 안내 드립니다. ",-1),K={__name:"SuggestView",setup(d){const o=f({title:"",contents:"",suggestName:"",suggestEmail:"",suggestTel:"",categoryId:null});function y(){o.value.title="",o.value.contents="",o.value.suggestName="",o.value.suggestEmail="",o.value.suggestTel="",o.value.categoryId=null}const x=f({flag:!1,message:"등록이 완료되었습니다.",timeout:1500}),m=f([]);async function A(s){try{const t=new FormData;m.value.forEach(a=>{t.append("file",a)}),await H(t).then(async a=>{console.log("fileUpload response=",a.data.file);try{const u={suggestId:s,filename:a.data.file.filename,originalname:a.data.file.originalname,mimetype:a.data.file.mimetype};await B(u).then(g=>{console.log("attach response=",g.data)}).catch(g=>{v(" 파일등록 실패.")&&console.log("Err addNotice() - createAttachFileApi"),console.log(">createAttachFileApi() fail. error=",g)})}catch(u){console.error(u)}}).catch(a=>{v(" 파일등록 실패.")&&console.log("Err addNotice() - fileUploadApi"),console.log(">fileUploadApi() fail. error=",a)})}catch(t){console.error(t)}}async function k(){await q(o.value).then(async s=>{if(s.data.status==="success"){console.log("createSuggest response.data=",s.data);const t=s.data.item.id;A(t),x.value.flag=!0}else console.log("::fail data.code=",s.data.code)}).catch(s=>{v(" 등록 실패.")&&console.log("Err addSuggest() - createSuggestApi"),console.log(">createSuggestApi() fail. error=",s)}),y()}return(s,t)=>(c(),_(w,null,{default:l(()=>[e(n,{justify:"center"},{default:l(()=>[e(i,{cols:"8",class:"ma-6"},{default:l(()=>[e(D,{class:"mx-6 pa-4"},{default:l(()=>[e(R,null,{default:l(()=>[J,e($,{modelValue:o.value.categoryId,"onUpdate:modelValue":t[0]||(t[0]=a=>o.value.categoryId=a),inline:"",density:"compact",color:"primary"},{default:l(()=>[e(V,{label:"시스템장애",value:"1"}),e(V,{label:"자료등록 신청",value:"2"}),e(V,{label:"기타",value:"3"})]),_:1},8,["modelValue"]),e(n,{dense:""},{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(r,{modelValue:o.value.suggestName,"onUpdate:modelValue":t[1]||(t[1]=a=>o.value.suggestName=a),label:"신청자",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{dense:""},{default:l(()=>[e(i,{cols:"6"},{default:l(()=>[e(r,{modelValue:o.value.suggestEmail,"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.suggestEmail=a),label:"e-mail",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(r,{modelValue:o.value.suggestTel,"onUpdate:modelValue":t[3]||(t[3]=a=>o.value.suggestTel=a),label:"연락처",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,null,{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(r,{modelValue:o.value.title,"onUpdate:modelValue":t[4]||(t[4]=a=>o.value.title=a),label:"제목",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{dense:""},{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(z,{modelValue:o.value.contents,"onUpdate:modelValue":t[5]||(t[5]=a=>o.value.contents=a),label:"내용",placeholder:"Write something …",variant:"outlined",clearable:"","clear-icon":"mdi-close-circle","auto-grow":"",rows:"18","row-height":"25"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{dense:""},{default:l(()=>[e(i,{cols:"12"},{default:l(()=>[e(L,{modelValue:m.value,"onUpdate:modelValue":t[6]||(t[6]=a=>m.value=a),label:"첨부파일",accept:"image/*",chips:"","show-size":"",variant:"outlined",density:"compact"},{selection:l(({fileNames:a})=>[(c(!0),U(E,null,S(a,u=>(c(),_(j,{key:u,size:"small",label:"",color:"primary",class:"me-2"},{default:l(()=>[p(C(u),1)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(G,null,{default:l(()=>[e(M),e(h,{class:"ma-2",color:"blue-darken-1",variant:"outlined"},{default:l(()=>[p(" 닫기 ")]),_:1}),e(h,{class:"ma-2",color:"blue-darken-1",variant:"flat",onClick:F(k,["stop"])},{default:l(()=>[p(" 저장 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},O=b("div",{class:"text-center text-h2 font-weight-black text-black mx-16 my-5"},"문의/제안 등록",-1),ue={__name:"index",setup(d){return(o,y)=>(c(),_(w,{fluid:"",class:"bg-white"},{default:l(()=>[O,e(W,{class:"my-4 border-opacity-100",thickness:3}),e(I(K))]),_:1}))}};export{ue as default};
